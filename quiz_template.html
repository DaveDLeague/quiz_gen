<html>
<div id='header'>
	<center> <h1>
		QUIZ TITLE
	</h1></center>
</div>
<div id='quiz'></div>
<div id='nav'></div>

<script>

var totalQuestions = 3;

var qDiv;
var navDiv;

var currentQuestion;
var questions = [];

function Question(){
	this.type;
	this.number;
	this.question;
	this.choices = [];
	this.correctAnswers = [];
	this.userAnswers = [];
}

window.onload = function(){
	qDiv = document.getElementById("quiz");
	navDiv = document.getElementById("nav");
	buildQuiz();
	
	navDiv.innerHTML += "NAVIGATION:<br>";
	for(var i = 0; i < totalQuestions; i++){
		navDiv.innerHTML += "<button onclick='navigateTo("+i+")'>"+(i + 1)+"</button>";
	}
	navDiv.innerHTML += "<br><br>";
	navDiv.innerHTML += "<button onclick='submitQuiz()'>Submit Quiz</button><br>";
}

function buildQuiz(){
	questions[0] = new Question();
	questions[0].number = 1;
	questions[0].type = "MULT_ANS";
	questions[0].question = "test question 1?";
	questions[0].choices[0] = "q1m choice A";
	questions[0].choices[1] = "q1m choice B";
	questions[0].choices[2] = "q1m choice C";
	questions[0].choices[3] = "q1m choice D";
	questions[0].correctAnswers[0] = 0;
	questions[0].correctAnswers[1] = 3;
	
	questions[1] = new Question();
	questions[1].number = 2;
	questions[1].type = "SING_ANS";
	questions[1].question = "test question 2?";
	questions[1].choices[0] = "q1s choice A";
	questions[1].choices[1] = "q1s choice B";
	questions[1].choices[2] = "q1s choice C";
	questions[1].choices[3] = "q1s choice D";
	questions[1].correctAnswers = 0;
	questions[1].userAnswers = -1;

	questions[2] = new Question();
	questions[2].number = 3;
	questions[2].type = "FILL_IN";
	questions[2].question = "test questionFILLLLLL?";
	questions[2].correctAnswers = "FILL ME INNNNNNNNNNN";

	currentQuestion = questions[0];
	displayQuestion();
}

function displayQuestion(){
	qDiv.innerHTML = "Question " + currentQuestion.number + ":<br><br>";
	qDiv.innerHTML += currentQuestion.question + "<br>";
	if(currentQuestion.type == "MULT_ANS"){
		qDiv.innerHTML += "<br>	(choose all that apply)<br>";
		qDiv.innerHTML += "<hr size='3'>";
		for(var i = 0; i < currentQuestion.choices.length; i++){
			if(currentQuestion.userAnswers.includes(i)){
				qDiv.innerHTML += "<input type='checkbox' checked></input>";	
			}else{
				qDiv.innerHTML += "<input type='checkbox'></input>";
			}
			
			qDiv.innerHTML += numToChar(i) + "<br>";
			qDiv.innerHTML += currentQuestion.choices[i] + "<br>";
			qDiv.innerHTML += "<hr size='3'>";
		}
	}else if(currentQuestion.type == "SING_ANS"){
		qDiv.innerHTML += "<hr size='3'>";
		for(var i = 0; i < currentQuestion.choices.length; i++){
			if(currentQuestion.userAnswers == i){
				qDiv.innerHTML += "<input type='radio' name='q"+currentQuestion.number+"' checked></input>";
			}else{
				qDiv.innerHTML += "<input type='radio' name='q"+currentQuestion.number+"'></input>";
			}
			qDiv.innerHTML += numToChar(i) + "<br>";
			qDiv.innerHTML += currentQuestion.choices[i] + "<br>";
			qDiv.innerHTML += "<hr size='3'>";
		}
	}else if(currentQuestion.type == "FILL_IN"){
		qDiv.innerHTML += "<textarea rows='7' cols='60'>"+currentQuestion.userAnswers+"</textarea>";
	}
	qDiv.innerHTML += "<br>";
	
	if(currentQuestion.number != 1){
		qDiv.innerHTML += "<button onclick='previousQuestion()'>Previous Question</button>";
	}
	if(currentQuestion.number != questions.length){
		qDiv.innerHTML += "<button onclick='nextQuestion()'>Next Question</button>";
	}
	
	qDiv.innerHTML += "<hr size='3'>";
}	

function submitQuiz(){
	if(!confirm("Are you sure you want to submit your quiz for grading?")) return;
	saveQuestionState();
}

function nextQuestion(){
	saveQuestionState();
	currentQuestion = questions[currentQuestion.number];
	displayQuestion();
}

function previousQuestion(){
	saveQuestionState();
	currentQuestion = questions[currentQuestion.number - 2];
	displayQuestion();
}

function navigateTo(i){
	saveQuestionState();
	currentQuestion = questions[i];
	displayQuestion();
}

function saveQuestionState(){
	if(currentQuestion.type == "MULT_ANS"){
		currentQuestion.userAnswers = [];
		var cbx = qDiv.getElementsByTagName("input");
		for(var i = 0; i < cbx.length; i++){
			if(cbx[i].checked){
				currentQuestion.userAnswers.push(i);
			}
		}
	}else if(currentQuestion.type == "SING_ANS"){
		currentQuestion.userAnswers = [];
		var cbx = qDiv.getElementsByTagName("input");
		for(var i = 0; i < cbx.length; i++){
			if(cbx[i].checked){
				currentQuestion.userAnswers = i;
			}
		}
	}else if(currentQuestion.type == "FILL_IN"){
		var tbx = qDiv.getElementsByTagName("textarea");
		currentQuestion.userAnswers = tbx[0].value;
	}
}

function numToChar(num){
	return String.fromCharCode("A".charCodeAt(0) + num);
}

</script>

</html>
